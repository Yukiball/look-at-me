"use strict";(self["webpackChunklook_at_me"]=self["webpackChunklook_at_me"]||[]).push([[594],{1306:function(t,s,e){e.r(s),e.d(s,{default:function(){return y}});var i=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"game"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"top"},[s("h1",{staticClass:"number"},[t._v("2048")]),s("div",{staticClass:"grade"},[s("div",{staticClass:"now"},[t._v(" 分数 "),s("div",{staticClass:"rem"},[t._v(t._s(t.score))])]),s("div",{staticClass:"history"},[t._v(" 历史最高分数 "),s("div",{staticClass:"rem"},[t._v(t._s(t.history))])])])]),s("div",{staticClass:"text"},[t._v("将相同数字融合相加，得到 2048 获胜!")]),s("div",{staticClass:"box"},[s("ul",{staticClass:"con"},t._l(t.myListObject,(function(e,i,h){return s("li",{key:h,staticClass:"numbox",attrs:{count:i}},[s("span",{directives:[{name:"show",rawName:"v-show",value:+e,expression:"+val"}],class:t.boxcolor(e)},[t._v(t._s(e))])])})),0)]),s("a",{staticClass:"jump",attrs:{href:" https://github.com/Yukiball/look-at-me/blob/master/src/views/2048/index.vue ",target:"_blank"}},[t._v("想看源码点这里")])]),t.showAlert?s("div",{staticClass:"alert"},[s("span",{staticClass:"over"},[t._v(t._s(t.endText))]),s("span",{staticClass:"score"},[t._v("您的分数为:"+t._s(t.score))]),s("span",{staticClass:"agin",on:{click:t.again}},[t._v("再来一次")])]):t._e()])},h=[],n=e(1114),r=(e(4114),e(3375),e(9225),e(3972),e(9209),e(5714),e(7561),e(6197),e(7475));const o=(t,s)=>{const e=s-t,i=Math.random();return t+Math.round(i*e)};var a=function(t,s,e,i){var h,n=arguments.length,r=n<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,s,e,i);else for(var o=t.length-1;o>=0;o--)(h=t[o])&&(r=(n<3?h(r):n>3?h(s,e,r):h(s,e))||r);return n>3&&r&&Object.defineProperty(s,e,r),r};let c=class extends r.lD{constructor(...t){super(...t),(0,n.A)(this,"gameLength",4),(0,n.A)(this,"score",0),(0,n.A)(this,"history",0),(0,n.A)(this,"rem",[]),(0,n.A)(this,"myListObject",{}),(0,n.A)(this,"startX",0),(0,n.A)(this,"startY",0),(0,n.A)(this,"endX",0),(0,n.A)(this,"endY",0),(0,n.A)(this,"showAlert",!1),(0,n.A)(this,"endText",""),(0,n.A)(this,"toDirection",{37:"left",38:"up",39:"right",40:"down"})}get myList(){return Object.keys(this.myListObject)}boxcolor(t){return`num${t}`}listObj(t,s){return this.myListObject[`${t},${s}`]}mounted(){this.init(),document.addEventListener("keydown",this.keydown),document.addEventListener("touchstart",this.myTouchstart),document.addEventListener("touchmove",this.myTouchmove),document.addEventListener("touchend",this.myTouchend)}beforeDestroy(){document.removeEventListener("keydown",this.keydown),document.removeEventListener("touchstart",this.myTouchstart),document.removeEventListener("touchmove",this.myTouchmove),document.removeEventListener("touchend",this.myTouchend)}init(){this.getDom(),this.grade()}getDom(){this.setDom(),this.getNum()}setDom(){this.myListObject={};for(let t=0;t<this.gameLength;t++)for(let s=0;s<this.gameLength;s++)this.$set(this.myListObject,`${t},${s}`,0)}getNum(){let t=[];this.rem=[];const s=o(2,4);for(;;){const e=o(0,15);if(t.push(e),this.rem=Array.from(new Set(t)),this.rem.length===s)return void this.addNum()}}addNum(){for(let t=0;t<this.rem.length;t++){let s=2*Math.round(Math.random()+1),e=this.rem[t];this.$set(this.myListObject,this.myList[e],s)}}keydown(t){switch(t.keyCode){case 37:this.myOnkeydown(37);break;case 38:this.myOnkeydown(38);break;case 39:this.myOnkeydown(39);break;case 40:this.myOnkeydown(40);break}}myTouchstart(t){t.preventDefault();let s=t.touches[0];this.startY=s.clientY,this.startX=s.clientX,this.endY=s.clientY,this.endX=s.clientX}myTouchmove(t){t.preventDefault();let s=t.touches[0];this.endY=s.clientY,this.endX=s.clientX}myTouchend(){this.endY-this.startY>50&&Math.abs(this.endX-this.startX)<this.endY-this.startY?this.myOnkeydown(40):this.endY-this.startY<-50&&Math.abs(this.endX-this.startX)<Math.abs(this.endY-this.startY)?this.myOnkeydown(38):this.endX-this.startX>50&&Math.abs(this.endY-this.startY)<this.endX-this.startX?this.myOnkeydown(39):this.endX-this.startX<-50&&Math.abs(this.endY-this.startY)<Math.abs(this.endX-this.startX)&&this.myOnkeydown(37)}checkSame(t,s){for(let e of this.myList)if(t[e]!==s[e])return!1;return!0}myOnkeydown(t){let s={...this.myListObject};this.changeDirection(t),this.checkSame(s,this.myListObject)||(this.born(),this.grade(),this.gameover(),this.win())}changeDirection(t){let s,e,i=this.toDirection[t],h=[],n=[];if("up"===i||"down"===i){let t=[...this.myList];t="up"===i?t:t.reverse();for(let s=0;s<this.gameLength;s++){let e=s,i=0;while(i<this.gameLength)n.push(...t.slice(e,e+1)),e+=this.gameLength,i++}}else n=[...this.myList],n="right"===i?n.reverse():n;s=e="left"===i||"up"===i?0:this.gameLength-1,n.push("n,n");for(let r of n)if(e="right"===i||"left"===i?+r.split(",")[0]:+r.split(",")[1],e===s)h.push(this.myListObject[r]);else{const t=[...h];while(t.includes(0))t.splice(t.indexOf(0),1);for(let s=0;s<t.length;s++)t[s]===t[s+1]&&(t[s]=2*t[s],this.score+=t[s],t[s+1]=0,t.splice(t.indexOf(0),1));for(let e=0;e<this.gameLength;e++)"left"===i?this.$set(this.myListObject,`${s},${e}`,t[e]||0):"right"===i?this.$set(this.myListObject,`${s},${this.gameLength-e-1}`,t[e]||0):"up"===i?this.$set(this.myListObject,`${e},${s}`,t[e]||0):this.$set(this.myListObject,`${this.gameLength-e-1},${s}`,t[e]||0);s=e,h=[],h.push(this.myListObject[r])}}born(){const t=[];for(let i of this.myList)0==this.myListObject[i]&&t.push(i);let s=o(0,t.length-1),e=2*Math.round(Math.random()+1);this.myListObject[t[s]]=e}grade(){const t=window.localStorage;t.score?(this.history=t.score,this.score>this.history&&(t.score=this.score,this.history=this.score)):(t.score=0,this.history=0)}win(){for(let t of this.myList)2048==this.myListObject[""+t]&&setTimeout((()=>{this.showAlert=!0,this.endText="恭喜通关！",this.grade()}))}gameover(){let t=0,s=0,e=0;while(t<this.gameLength){if(s=0,t<this.gameLength-1)while(s<this.gameLength)s<this.gameLength-1?(0===this.myListObject[`${s},${t}`]&&e++,this.myListObject[`${s},${t}`]!==this.myListObject[`${s+1},${t}`]&&this.myListObject[`${s},${t}`]!==this.myListObject[`${s},${t+1}`]||e++):(0===this.myListObject[`${s},${t}`]&&e++,this.myListObject[`${s},${t}`]===this.myListObject[`${s},${t+1}`]&&e++),s++;else while(s<this.gameLength)0===this.myListObject[`${s},${t}`]&&e++,s<this.gameLength-1?this.myListObject[`${s},${t}`]===this.myListObject[`${s+1},${t}`]&&e++:0===this.myListObject[`${s},${t}`]&&e++,s++;t++}0===e&&setTimeout((()=>{this.endText="游戏结束!",this.showAlert=!0,this.grade()}),100)}again(){this.score=0,this.showAlert=!1,this.myListObject={},this.init()}};c=a([r.uA],c);var m=c,l=m,d=e(1656),u=(0,d.A)(l,i,h,!1,null,"27fd73af",null),y=u.exports}}]);
//# sourceMappingURL=about.d0794376.js.map